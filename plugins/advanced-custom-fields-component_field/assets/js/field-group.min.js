!function(e,t){var n=function(e,t){return jQuery.inArray(e,t)>=0},o=function(e){function t(e){return"settings"==e.get("save")}var n=t(e);return acf.getFieldObjects({parent:e.$el}).map(function(e){n=t(e)||e.changed}),n},a=function(e){return e.$el?e.$el:e.data("type")?e:e.closest(".acf-field-object")},c=function(e){return n(a(e).data("type"),["repeater","component_field"])},i=function(e){e.find(".row-options .convert-field").length>0||jQuery('<a class="convert-field" title="'+acf.__("convert_title")+'" href="#" style="margin-left: 3px;">'+acf.__("convert_text")+"</a>").insertAfter(e.find(".row-options .move-field"))},f=function(e){0!=e.find(".row-options .convert-field").length&&e.find(".row-options .convert-field").remove()},r=function(e){d(e),e.set("field_group_key",e.val()),e.$el.find("select").on("change",function(){e.changeTimeout&&clearTimeout(e.changeTimeout);var t=setTimeout(function(){l(e)},300);e.changeTimeout=t})},d=function(e){var t=e.$el.closest(".acf-field-object").attr("data-key");e.$el.find('option[value="'+t+'"]').prop("disabled",!0)},l=function(t){var n=t.$el.closest(".acf-field-object").attr("data-key"),o=acf.getFieldObject(n),a=t.val(),c=o.prop("type"),i=t.$el.siblings('[data-setting="'+c+'"]');if(t.set("component_group-"+t.get("field_group_key"),i),t.set("field_group_key",a),i.detach(),t.has("xhr")&&t.get("xhr").abort(),t.has("component_group-"+a)){var f=t.get("component_group-"+a);return void o.$setting("conditional_logic").before(f)}var r=e('<tr class="acf-field"><td class="acf-label"></td><td class="acf-input"><div class="acf-loading"></div></td></tr>');o.$setting("conditional_logic").before(r);var d={action:"acf/field_types/component_field/load_settings",field_group_key:a,prefix:o.getInputName()},l=e.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(d),type:"post",dataType:"html",success:function(e){e&&(r.after(e),acf.doAction("append",t.$el.parent("tbody")))},complete:function(){r.remove()}});t.set("xhr",l)};e(document).on("change.adjust_acf_metabox","#is_acf_component_checkbox",function(t){e(this).is(":checked")?(e("#acf-field-group-locations, #acf-field-group-options").hide(),e("#acf-component-field-default-metabox").show()):(e("#acf-field-group-locations, #acf-field-group-options").show(),e("#acf-component-field-default-metabox").hide())}),acf.addAction("ready",function(){acf.getFieldObjects().filter(c).map(function(e){i(a(e))}),e("[data-name='field_group_key']").each(function(){var t=acf.getField(e(this));r(t)}),e("#is_acf_component_checkbox").trigger("change.adjust_acf_metabox")}),acf.addAction("append_field/name=field_group_key",function(e){r(e)}),acf.addAction("append",function(e){var t=a(e);c(t)?i(t):f(t)}),acf.FieldObject.prototype.events["click .convert-field"]="onConvert",acf.FieldObject.prototype.onConvert=function(){var t=this,n=!1;if(o(t))return void alert(acf.__("convert_warning"));var a=function(e){n.loading(!1),n.content(e),acf.doAction("append",n.$el),n.on("submit","form",c)},c=function(o){o.preventDefault(),acf.startButtonLoading(n.$(".button"));var a=n.$('input[name="convert-to"]'),c=n.$('input[name="delete-component"]:checked').length>0,f={action:"acf/component_field/features/convert",field_key:t.get("key"),convert_to:a.val(),delete_component:c,order:t.get("menu_order")};return c&&!confirm(acf.__("convert_delete_confirm_message"))?(acf.stopButtonLoading(n.$(".button")),!1):(e.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(f),type:"post",dataType:"json",success:i}),!1)},i=function(o){if(o.data.field){var a=e(o.data.field);t.$el.before(a),t.removeAnimate();var c=acf.newFieldObject(a);acf.doAction("append",c.$el)}n.content(o.data.popup)};!function(){n=acf.newPopup({title:acf.__("convert_popup_title"),loading:!0,width:"500px"});var o={action:"acf/component_field/features/convert_check",field_key:t.get("key")};e.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(o),type:"post",dataType:"html",success:a})}()}}(jQuery);