!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=31)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.stepContent=n,this.wizardFramework=i}return i(t,[{key:"find",value:function(t){return this.stepContent.find(t)}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(e,n,i,a,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.content=e,this.pairsUI=e.find(".js-language-pairs"),this.fromLang=n,this.toLangs=i,this.fromLangChangeCallback=a,this.toLangChangeCallback=o,this.UI=null}return i(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.copyTemplateUI(),this.setLanguages(t)}},{key:"copyTemplateUI",value:function(){var t=this;this.UI=this.content.find(".js-select-languages:last").clone().show(),this.UI.appendTo(this.pairsUI),this.fromLanguageSelect=this.UI.find(".js-from-language-select"),this.fromLanguageSelect.on("change",function(e){return t.fromLanguageChanged()}),this.toLanguageCheckboxes=this.UI.find(":checkbox"),this.toLanguageCheckboxes.on("change",function(e){t.toLangChangeCallback()}),this.trashIcon=this.UI.find(".js-delete-language-pair")}},{key:"setLanguages",value:function(t){var e=this;this.fromLang&&this.fromLanguageSelect.val(this.fromLang),this.disableFromLanguages(t),this.UI.find(".js-to-languages").show(),this.toLangs.forEach(function(t){return e.UI.find(":checkbox[value="+t+"]").prop("checked",!0)}),this.hideToLanguage(this.fromLang)}},{key:"disableFromLanguages",value:function(t){var e=this;this.fromLanguageSelect.find("option").prop("disabled",!1),t&&t.forEach(function(t){return e.fromLanguageSelect.find("option[value="+t+"]").prop("disabled",t!==e.fromLang)})}},{key:"disableFromLanguageSelect",value:function(t){this.fromLanguageSelect.prop("disabled",t)}},{key:"hideToLanguage",value:function(t){this.toLanguageCheckboxes.closest("label").show(),this.UI.find(":checkbox[value="+t+"]").prop("checked",!1).closest("label").hide()}},{key:"getFromLanguage",value:function(){return this.fromLanguageSelect.val()}},{key:"getToLanguages",value:function(){var t=[];return this.UI.find(":checkbox:checked").each(function(e,n){return t.push(n.value)}),t}},{key:"fromLanguageChanged",value:function(){this.fromLang=this.getFromLanguage(),this.hideToLanguage(this.getFromLanguage()),this.fromLangChangeCallback()}},{key:"hideTrashIcon",value:function(t){t?this.trashIcon.hide():this.trashIcon.show()}},{key:"addTrashHook",value:function(t){var e=this;this.trashIcon.off("click").on("click",function(n){return e.onTrash(t)})}},{key:"onTrash",value:function(t){t(this),this.UI.remove()}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),r=(i=o)&&i.__esModule?i:{default:i};var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.content=e,this.languagePairs=[]}return a(t,[{key:"init",value:function(t,e,n){var i=this;for(var a in this.isFromLanguageSelectedCallback=e,this.isAnyLanguagePairOKCallback=n,this.languagePairs=[],t)if(t.hasOwnProperty(a)){var o=new r.default(this.content,a,t[a],function(){return i.notifyLanguageChanged()},function(){return i.toLanguageChanged()});o.init(),this.languagePairs.push(o)}this.addLanguagePairIfNoneInitialized(),this.setLanguageStates()}},{key:"addLanguagePairIfNoneInitialized",value:function(){this.languagePairs.length||this.addLanguagePair()}},{key:"addLanguagePair",value:function(){var t=this,e=new r.default(this.content,null,[],function(){return t.notifyLanguageChanged()},function(){return t.toLanguageChanged()});e.init(this.getFromLanguages()),this.languagePairs.push(e),this.setLanguageStates()}},{key:"setLanguageStates",value:function(){this.disableAllButLastFromLanguage(),this.disablePreviousFromLanguagesInLast(),this.hideTrashIconIfOnlyOneLanguage(),this.addTrashHook(),this.notifyLanguageChanged()}},{key:"getLanguagePairs",value:function(){var t={};return this.languagePairs.forEach(function(e){var n=e.getFromLanguage(),i=e.getToLanguages();"0"!==n&&i.length&&(t[n]=i)}),t}},{key:"getFromLanguages",value:function(){var t=[];return this.languagePairs.forEach(function(e){var n=e.getFromLanguage();"0"!==n&&t.push(n)}),t}},{key:"disableAllButLastFromLanguage",value:function(){for(var t=0;t<this.languagePairs.length-1;t++)this.languagePairs[t].disableFromLanguageSelect(!0);this.languagePairs[this.languagePairs.length-1].disableFromLanguageSelect(!1)}},{key:"disablePreviousFromLanguagesInLast",value:function(){var t=this.languagePairs.length;t&&this.languagePairs[t-1].disableFromLanguages(this.getFromLanguages())}},{key:"hideTrashIconIfOnlyOneLanguage",value:function(){var t=1===this.languagePairs.length;this.languagePairs.forEach(function(e){return e.hideTrashIcon(t)})}},{key:"addTrashHook",value:function(){var t=this;this.languagePairs.forEach(function(e){return e.addTrashHook(function(e){return t.onTrash(e)})})}},{key:"onTrash",value:function(t){this.languagePairs=this.languagePairs.filter(function(e){return e.getFromLanguage()!==t.getFromLanguage()}),this.setLanguageStates()}},{key:"notifyLanguageChanged",value:function(){var t=this.languagePairs.some(function(t){return"0"===t.getFromLanguage()});this.isFromLanguageSelectedCallback(!t),this.isAnyLanguagePairOKCallback(Object.keys(this.getLanguagePairs()).length>0)}},{key:"toLanguageChanged",value:function(){this.isAnyLanguagePairOKCallback(Object.keys(this.getLanguagePairs()).length>0)}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.section=null}return i(t,[{key:"show",value:function(t){t?this.section.show():this.section.hide()}},{key:"isShown",value:function(){return this.section.is(":visible")}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n(24),o=(i=a)&&i.__esModule?i:{default:i};e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.restUrl=WPML_TM_SETTINGS.restUrl,this.restNonce=WPML_TM_SETTINGS.restNonce,this.ateSettings=WPML_TM_SETTINGS.ate,this.currentUser=new o.default(WPML_TM_SETTINGS.currentUser)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=(i=o)&&i.__esModule?i:{default:i};var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),a(e,[{key:"init",value:function(){this.wizardFramework.showSteps(!0),this.initializeEventHandlers()}},{key:"initializeEventHandlers",value:function(){var t=this;this.stepContent.find(".js-go-back").on("click",function(e){return t.goBack()}),this.stepContent.find(".js-done").on("click",function(e){return t.done()})}},{key:"goBack",value:function(){this.wizardFramework.moveToPreviousStep()}},{key:"done",value:function(){var t=this;this.$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpml_tm_wizard_done"},success:function(e){return t.doneSent(e)}})}},{key:"doneSent",value:function(t){t.success&&location.reload()}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={fetchXLIFF:function(t){return"/wpml/tm/v1/xliff/fetch/"+t},storeATEJob:"/wpml/tm/v1/ate/jobs/store",assignJob:"/wpml/tm/v1/jobs/assign",disableRESTPickup:"/wpml/tm/v1/pickup/rest/disable",enableRESTPickup:"/wpml/tm/v1/pickup/rest/enable",setTranslationEditor:"/wpml/tm/v1/settings/translation_editor"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=r(n(6)),o=r(n(0));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(t,n,i,a,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return r.ateControls=a,r.request=o,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"init",value:function(){this.wizardFramework.showSteps(!0),this.continueButton=this.stepContent.find(".js-continue"),this.initializeEventHandlers(),this.ateControls.init(),this.ateControls.hide()}},{key:"initializeEventHandlers",value:function(){var t=this;this.stepContent.find(".js-go-back").on("click",function(e){return t.goBack()}),this.stepContent.find(".js-continue").on("click",function(e){return t.nextStep()}),this.stepContent.find(".js-ate-editor, .js-classic-editor").on("click",function(e){return t.selectEditor(e)})}},{key:"goBack",value:function(){this.wizardFramework.moveToPreviousStep()}},{key:"selectEditor",value:function(t){var e=this,n=t.target.value;this.continueButton.prop("disabled",!0);var i=t.target.classList.contains("js-ate-editor")&&this.ateControls.ATERequiresActivation;i?this.ateControls.enableATE(function(){return e.saveEditor(n)}):this.saveEditor(n),this.ateControls.visibility(i)}},{key:"saveEditor",value:function(t){var e=this;this.request.post(a.default.setTranslationEditor,{editor_type:t}).then(function(){e.continueButton.prop("disabled",!1)})}},{key:"nextStep",value:function(){this.wizardFramework.moveToNextStep()}},{key:"isOkToMoveToNextStep",value:function(t){t(!0)}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(e,n,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.content=n,this.nonce=i,this.editTranslatorLanguageDialog=a,this.translatorRemovedCallback=o}return i(t,[{key:"init",value:function(){var t=this;this.content.find(".js-remove-translator").off("click").on("click",function(e){return t.removeTranslator(e)}),this.content.find(".js-edit-languages").off("click").on("click",function(e){return t.editTranslatorLanguages(e)})}},{key:"addRow",value:function(t){this.content.find("tbody").append(t),this.init(),this.showOrHideList()}},{key:"removeTranslator",value:function(t){var e=this,n=this.getEventRow(t),i=n.data("user-id");this.$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpml_remove_translation_translator",nonce:this.nonce,user_id:i},success:function(t){return e.translatorRemoved(t,n)}})}},{key:"translatorRemoved",value:function(t,e){t.success&&(e.remove(),this.showOrHideList(),this.translatorRemovedCallback&&this.translatorRemovedCallback())}},{key:"showOrHideList",value:function(){this.getNumberOfTranslators()?this.content.show():this.content.hide()}},{key:"editTranslatorLanguages",value:function(t){var e=this,n=this.getEventRow(t),i=n.data("user-id"),a=n.data("language-pairs");this.editTranslatorLanguageDialog.open(i,a,function(t){return e.updateTranslator(n,t)})}},{key:"getEventRow",value:function(t){return this.$(t.target).closest("tr")}},{key:"updateTranslator",value:function(t,e){t.replaceWith(e),this.init(),this.editTranslatorLanguageDialog.close()}},{key:"getNumberOfTranslators",value:function(){return this.content.find("tbody > tr").length}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=(o(n(1)),o(n(2)));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.content=n,this.nonce=i,this.userId=null,this.updateTranslatorCallback=null,this.setupDialog()}return i(t,[{key:"setupDialog",value:function(){var t=this,e="js-edit-translator-languages-dialog";this.dialogElement=this.content.find("#"+e),this.dialogElement.dialog({autoOpen:!1,resizable:!1,draggable:!1,modal:!0,width:"auto",dialogClass:"wpml-dialog otgs-ui-dialog",closeText:this.dialogElement.data("cancel-text"),closeOnEscape:!0,buttons:[{class:"button-seconday alignleft "+e+"-cancel",text:this.dialogElement.data("cancel-text"),click:function(){return t.close()}},{class:"button-primary alignright "+e+"-ok",text:this.dialogElement.data("save-text"),click:function(){return t.save()}}],close:function(){}}),this.dialogElement.find(".js-add-lang-pair").on("click",function(e){return t.addLanguagePair()})}},{key:"open",value:function(t,e,n){var i=this;this.userId=t,this.updateTranslatorCallback=n,this.resetDialog(),this.languagePairUIContainer.init(e,function(t){return i.enableAddButton(t)},function(t){return i.enableSaveButton(t)}),this.dialogElement.dialog("open")}},{key:"close",value:function(){this.dialogElement.dialog("close")}},{key:"save",value:function(){var t=this;new WPML_TM.setTranslationRole(this.$,null,this.nonce,"translator").setExisting(this.userId,function(e){return t.updateTranslator(e)},null,{languagePairs:this.getLanguagePairs()})}},{key:"getLanguagePairs",value:function(){return this.languagePairUIContainer.getLanguagePairs()}},{key:"getFromLanguages",value:function(){return this.languagePairUIContainer.getFromLanguages()}},{key:"resetDialog",value:function(){this.dialogElement.find(".js-language-pairs").html(""),this.languagePairUIContainer=new a.default(this.dialogElement)}},{key:"updateTranslator",value:function(t){this.updateTranslatorCallback(t)}},{key:"addLanguagePair",value:function(){this.languagePairUIContainer.addLanguagePair(),this.enableAddButton(!1)}},{key:"enableAddButton",value:function(t){this.dialogElement.find(".js-add-lang-pair").prop("disabled",!t)}},{key:"enableSaveButton",value:function(t){this.$(".js-edit-translator-languages-dialog-ok").prop("disabled",!t)}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=r(n(3)),o=r(n(2));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"init",value:function(t){return this.initializeSelectors(t),this.reset(),this}},{key:"initializeSelectors",value:function(t){var e=this;this.section=this.$("#"+t).find(".js-select-languages-section"),this.dialogOK=this.$("."+t+"-ok").attr("disabled","disabled"),this.section.find(".js-add-lang-pair").on("click",function(t){return e.addLanguagePair()})}},{key:"reset",value:function(){var t=this;this.section.find(".js-language-pairs").html(""),this.languagePairUIContainer=new o.default(this.section),this.languagePairUIContainer.init({},function(e){return t.enableAddButton(e)},function(e){return t.enableOkButton(e)}),this.enableOkButton(!1)}},{key:"show",value:function(t){(function t(e,n,i){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,n);if(void 0===a){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in a)return a.value;var r=a.get;return void 0!==r?r.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this,t),t&&(this.dialogOK.text(this.section.data("add-translator-text")),this.languagePairUIContainer.notifyLanguageChanged())}},{key:"setUserName",value:function(t){var e=this.section.find("h4"),n=e.data("text");e.text(n.replace("%USERNAME%",t))}},{key:"addLanguagePair",value:function(){this.languagePairUIContainer.addLanguagePair(),this.enableAddButton(!1)}},{key:"enableOkButton",value:function(t){t?this.dialogOK.removeAttr("disabled"):this.dialogOK.attr("disabled","disabled")}},{key:"enableAddButton",value:function(t){this.section.find(".js-add-lang-pair").prop("disabled",!t)}},{key:"getLanguagePairs",value:function(){return this.languagePairUIContainer.getLanguagePairs()}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),r=(i=o)&&i.__esModule?i:{default:i};var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.currentMode=null,n.selectedUser=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),a(e,[{key:"init",value:function(t,e){var n=this;this.initializeSelectors(t,e),WPML_TM.translationRolesSelect2(this.existingTranslatorSelect,this.nonce,"translator",function(t){return n.selectChange(t)}),this.addTranslator=new WPML_TM.setTranslationRole(this.$,e,this.nonce,"translator",function(t){return n.enableButton(t)})}},{key:"initializeSelectors",value:function(t,e){var n=this;this.existingTranslatorSelect=e.find(".js-translation-translator-select"),this.section=e.find(".js-select-translator"),this.nonce=this.section.data("nonce"),this.modeRadios=e.find('[name="user-translator"]').on("change",function(t){return n.onMode()}),this.existingSection=e.find(".js-existing-user-section"),this.newSection=e.find(".js-new-user-section"),this.dialogOK=this.$("."+t+"-ok").attr("disabled","disabled")}},{key:"reset",value:function(){this.addTranslator.resetInputs(),this.existingTranslatorSelect.select2("val",""),this.selectedUser=null,this.modeRadios.prop("checked",!1),this.existingSection.hide(),this.newSection.hide()}},{key:"selectChange",value:function(t){this.selectedUser=this.$(t.target).select2("data"),this.enableButton(""!==this.selectedUser.ID)}},{key:"onMode",value:function(){var t=this;this.modeRadios.each(function(e,n){return t.showSelectedSection(n)}),this.enableButtonIfRequired(),this.closeExistingTranslatorSelect()}},{key:"closeExistingTranslatorSelect",value:function(){this.existingTranslatorSelect.select2("close")}},{key:"showSelectedSection",value:function(t){if((t=this.$(t)).is(":checked"))switch(this.currentMode=t.val(),this.currentMode){case"existing":this.existingSection.show(),this.newSection.hide();break;case"new":this.existingSection.hide(),this.newSection.show()}}},{key:"enableButton",value:function(t){t?this.dialogOK.removeAttr("disabled"):this.dialogOK.attr("disabled","disabled")}},{key:"enableButtonIfRequired",value:function(){if(this.currentMode)switch(this.currentMode){case"new":this.enableButton(this.addTranslator.isValid());break;case"existing":this.enableButton(this.selectedUser&&""!==this.selectedUser.ID)}}},{key:"show",value:function(t){(function t(e,n,i){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,n);if(void 0===a){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in a)return a.value;var r=a.get;return void 0!==r?r.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this,t),t&&(this.dialogOK.text(this.section.data("set-languages-text")),this.enableButtonIfRequired())}},{key:"getUserName",value:function(){switch(this.currentMode){case"new":return this.addTranslator.getUserName();case"existing":return this.selectedUser.display_name}}},{key:"addTranslatorViaAjax",value:function(t,e,n){switch(this.currentMode){case"new":this.addTranslator.addNew(e,n,{languagePairs:t});break;case"existing":this.addTranslator.setExisting(this.selectedUser.ID,e,n,{languagePairs:t})}}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=r(n(11)),o=r(n(10));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.content=n,this.translatorAddedCallback=i,this.setupDialog()}return i(t,[{key:"setupDialog",value:function(){var t=this,e="js-add-translator-dialog";this.dialogElement=this.content.find("#"+e),this.dialogElement.dialog({autoOpen:!1,resizable:!1,draggable:!1,modal:!0,width:"auto",dialogClass:"wpml-dialog otgs-ui-dialog",closeText:this.dialogElement.data("cancel-text"),closeOnEscape:!0,buttons:[{class:"button-secondary alignleft "+e+"-cancel",text:this.dialogElement.data("cancel-text"),click:function(){return t.close()}},{class:"button-primary alignright "+e+"-ok",text:"",click:function(){return t.buttonClick()}},{class:"button-secondary alignright "+e+"-previous",text:this.dialogElement.data("previous-text"),click:function(){return t.showTranslationSection()}}],close:function(){t.addTranslator.closeExistingTranslatorSelect(),t.close()}}),this.addTranslator=new a.default(this.$),this.addTranslator.init(e,this.dialogElement),this.setLanguagesUI=new o.default(this.$).init(e),this.previousButton=this.$("."+e+"-previous").hide()}},{key:"open",value:function(){var t=this;this.$(window).on("resize.repositionDialog",function(){return t.repositionDialog()}),this.addTranslator.reset(),this.setLanguagesUI.reset(),this.showTranslationSection(),this.dialogElement.dialog("open"),this.repositionDialog()}},{key:"close",value:function(){this.$(window).off("resize.repositionDialog"),this.dialogElement.dialog("close")}},{key:"destroy",value:function(){this.dialogElement.dialog("destroy").remove()}},{key:"buttonClick",value:function(){var t=this;this.setLanguagesUI.isShown()?this.addTranslator.addTranslatorViaAjax(this.setLanguagesUI.getLanguagePairs(),this.translatorAddedCallback,function(e){return t.translatorFailedCallback(e)}):this.showSetLanguagesSection()}},{key:"showTranslationSection",value:function(){this.addTranslator.show(!0),this.setLanguagesUI.show(!1),this.previousButton.hide(),this.dialogElement.find(".js-error").hide().html("")}},{key:"showSetLanguagesSection",value:function(){this.addTranslator.show(!1),this.setLanguagesUI.setUserName(this.addTranslator.getUserName()),this.setLanguagesUI.show(!0),this.previousButton.show()}},{key:"translatorFailedCallback",value:function(t){this.dialogElement.find(".js-error").show().html(t)}},{key:"repositionDialog",value:function(){this.$(".otgs-ui-dialog .ui-dialog-content").css({"max-height":this.$(window).height()-180}),this.$(".otgs-ui-dialog").css({"max-width":"95%"}),this.$(".js-select-translator, .js-select-languages, .js-select-languages-section").css({"max-width":"100%"}),this.dialogElement.dialog("option","position",{my:"center",at:"center",of:window})}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=u(n(12)),o=u(n(9)),r=u(n(0)),s=u(n(8));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:"init",value:function(){var t=this,e=this.stepContent.find(".js-wpml-translators-step"),n=e.data("nonce");this.skipButton=this.stepContent.find(".js-skip"),0===parseInt(e.data("active-translation-service-id"))&&this.skipButton.hide(),this.wizardFramework.showSteps(!0),this.addNewTranslatorDialog=new a.default(this.$,this.stepContent,function(e){return t.translatorAdded(e)}),this.translatorsTable=new s.default(this.$,this.stepContent.find(".js-translators-table"),n,new o.default(this.$,this.stepContent,n),function(){return t.showControlsIfTranslatorsExist()}),this.translatorsTable.init(),this.showControlsIfTranslatorsExist(),this.initializeEventHandlers()}},{key:"initializeEventHandlers",value:function(){var t=this;this.stepContent.find(".js-add-translator").off("click").on("click",function(e){return t.addNewTranslator()}),this.stepContent.find(".js-go-back").on("click",function(e){return t.goBack()}),this.stepContent.find(".js-continue").on("click",function(e){return t.nextStep()}),this.skipButton.on("click",function(e){return t.nextStep()})}},{key:"addNewTranslator",value:function(){this.addNewTranslatorDialog.open()}},{key:"goBack",value:function(){this.addNewTranslatorDialog.destroy(),this.wizardFramework.moveToPreviousStep()}},{key:"nextStep",value:function(){this.addNewTranslatorDialog.destroy(),this.wizardFramework.moveToNextStep()}},{key:"translatorAdded",value:function(t){this.addNewTranslatorDialog.close(),this.translatorsTable.addRow(t),this.showControlsIfTranslatorsExist()}},{key:"showControlsIfTranslatorsExist",value:function(){this.translatorsTable.getNumberOfTranslators()?(this.stepContent.find(".js-translators-list").show(),this.stepContent.find(".js-add-translator.wpml-button").hide(),this.stepContent.find(".js-continue").show(),this.skipButton.hide()):(this.stepContent.find(".js-translators-list").hide(),this.stepContent.find(".js-add-translator.button-secondary").show(),this.stepContent.find(".js-add-translator.wpml-button").show(),this.stepContent.find(".js-continue").hide())}},{key:"isOkToMoveToNextStep",value:function(t){t(!0)}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e}return i(t,[{key:"getId",value:function(){return this.element.data("id")}},{key:"getName",value:function(){return this.element.data("name")}},{key:"getLogo",value:function(){return this.element.data("logo")}},{key:"getConnectDesc",value:function(){return this.element.data("get-credentials-desc")}},{key:"getConnectUrl",value:function(){return this.element.data("get-credentials-url")}},{key:"getCustomFields",value:function(){return this.element.data("custom-fields")}},{key:"getCreateAccountURL",value:function(){return this.element.data("create-account-url")}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.translationServiceData=e,this.wizardFramework=n}return i(t,[{key:"init",value:function(t){this.connectSection=t.find(".js-connect-section"),this.translationService=new WPMLTranslationServicesDialog,this.translationService.init(),this.initializeUI(),this.showActivateSection()}},{key:"initializeUI",value:function(){var t=this,e=this.connectSection.find("h2");this.connectSection.find(".js-activate-logo").attr("src",this.translationServiceData.getLogo()),e.text(e.data("text").replace(/%PLACEHOLDER%/g,this.translationServiceData.getName()));var n=this.connectSection.find(".js-connect-desc");this.translationServiceData.getConnectDesc()?n.html(this.translationServiceData.getConnectDesc()):n.html(n.data("text").replace(/%PLACEHOLDER%/g,this.translationServiceData.getName()));var i=this.connectSection.find(".js-connect-how-to-find");this.translationServiceData.getConnectUrl()&&i.attr("href",this.translationServiceData.getConnectUrl()),i.html(i.data("text").replace(/%PLACEHOLDER%/g,this.translationServiceData.getName())),this.continue=this.connectSection.find(".js-authenticate"),this.continue.off("click").on("click",function(e){return t.onActivate()}),this.translationService.buildCustomFieldsUI(this.translationServiceData.getCustomFields(),this.connectSection.find(".js-custom-fields-wrapper")),this.customFields=this.connectSection.find(".js-custom-fields-wrapper").find(".custom_fields"),this.errorElement=this.connectSection.find(".js-error-message").hide()}},{key:"showActivateSection",value:function(){this.connectSection.show()}},{key:"onActivate",value:function(){var t=this;this.errorElement.hide(),this.translationService.toggleService(this.translationServiceData.getId(),this.continue,!0,function(e){return t.onServiceActivated(e)})}},{key:"onServiceActivated",value:function(t){var e=this;t.activated&&this.translationService.translationServiceAuthentication(this.translationServiceData.getId(),this.continue,0,function(t){return e.onServiceAuthenticated(t)})}},{key:"onServiceAuthenticated",value:function(t){this.continue.prop("disabled",!1),0===t.errors?this.wizardFramework.moveToNextStep():this.errorElement.html(t.message).show()}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(15),r=(i=o)&&i.__esModule?i:{default:i};var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.translationServiceData=e,this.wizardFramework=n,this.content=null}return a(t,[{key:"init",value:function(t){var e=this;this.content=t,this.activateSection=t.find(".js-activate-section"),this.activateSection.find(".js-connect-account").off("click").on("click",function(t){return e.onConnectAccount()}),this.initializeUI(),this.showActivateSection()}},{key:"initializeUI",value:function(){var t=this.activateSection.find("h2");this.activateSection.find(".js-activate-logo").attr("src",this.translationServiceData.getLogo()),t.text(t.data("text").replace(/%PLACEHOLDER%/g,this.translationServiceData.getName()));var e=this.translationServiceData.getCreateAccountURL();e&&this.activateSection.find(".js-create-account").attr("href",e)}},{key:"showActivateSection",value:function(){this.content.find(".js-main-section").hide(),this.activateSection.show()}},{key:"onConnectAccount",value:function(){this.connectAccount=new r.default(this.translationServiceData,this.wizardFramework),this.connectAccount.init(this.content),this.activateSection.hide()}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=s(n(0)),o=s(n(16)),r=s(n(14));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"init",value:function(){var t=this;this.wizardFramework.showSteps(!0),this.stepContent.find(".js-skip-translation-services").on("click",function(e){return t.skipTranslationServices()}),this.hideSomeTranslationServicesSections(),this.enableAllActivateButtons(),this.hookPaginationEvents(),this.hookActivateEvents(),this.hookGoBack(),this.hookColumnSortingEvents()}},{key:"hideSomeTranslationServicesSections",value:function(){this.stepContent.find(".ts-admin-section-search, .js-available-title, .js-bottom-section, .items_per_page, .js-ts-active-service").hide()}},{key:"enableAllActivateButtons",value:function(){this.stepContent.find(".js-activate-service-id").prop("disabled",!1)}},{key:"hookPaginationEvents",value:function(){var t=this;this.stepContent.find(".next-page, .last-page, .previous-page, .first-page").on("click",function(e){return t.sortAndPaginate(e)}),this.stepContent.find(".current-page").prop("readonly",!0)}},{key:"hookActivateEvents",value:function(){var t=this;this.stepContent.find(".js-activate-service-id").on("click",function(e){return t.activateService(e)})}},{key:"hookGoBack",value:function(){var t=this;this.stepContent.find(".js-go-back").on("click",function(e){return t.goBack()})}},{key:"hookColumnSortingEvents",value:function(){var t=this;this.stepContent.find(".column-name > a, .column-popularity > a, .column-speed > a").on("click",function(e){return t.sortAndPaginate(e)})}},{key:"skipTranslationServices",value:function(){this.wizardFramework.moveToStep(2)}},{key:"activateService",value:function(t){var e=new r.default(this.$(t.target));return this.activateServiceUI=new o.default(e,this.wizardFramework),this.activateServiceUI.init(this.stepContent),!1}},{key:"goBack",value:function(){this.stepContent.find(".js-activate-section").hide(),this.stepContent.find(".js-connect-section").hide(),this.stepContent.find(".js-main-section").show()}},{key:"sortAndPaginate",value:function(t){var e=this.$(t.currentTarget),n=new URL(e.attr("href")),i=n.searchParams.get("orderby"),a=n.searchParams.get("order"),o=n.searchParams.get("paged"),r={};return i&&(r.orderby=i),a&&(r.order=a),r.paged=o||"1",this.wizardFramework.fetchContent(r),!1}},{key:"isOkToMoveToNextStep",value:function(t){t(!0)}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=(i=o)&&i.__esModule?i:{default:i};var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),a(e,[{key:"init",value:function(){var t=this;this.wizardFramework.showSteps(!0),this.stepContent.find(".js-skip-translation-services").on("click",function(e){return t.skipTranslationServices()}),this.stepContent.find(".js-select-translation-service").on("click",function(e){return t.selectTranslationService()})}},{key:"skipTranslationServices",value:function(){this.wizardFramework.moveToStep(2)}},{key:"selectTranslationService",value:function(){this.wizardFramework.moveToStep(1)}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=(i=o)&&i.__esModule?i:{default:i};var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),a(e,[{key:"init",value:function(){var t=this;this.button=this.find(".js-send-email"),this.button.on("click",function(e){return t.sendEmail()}),this.spinner=this.find(".spinner"),this.notice=this.find(".js-notice")}},{key:"sendEmail",value:function(){var t=this,e=this.button.data("nonce"),n=this.button.data("user-id");this.spinner.addClass("is-active"),this.button.prop("disabled",!0),this.notice.hide(),this.$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpml_send_instructions_to_translation_manager",nonce:e,user_id:n},success:function(e){return t.emailSentResponse(e)}})}},{key:"emailSentResponse",value:function(t){this.button.prop("disabled",!1),this.spinner.removeClass("is-active"),this.notice.html(t.data).show()}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=(i=o)&&i.__esModule?i:{default:i};var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),a(e,[{key:"init",value:function(){var t=this;WPMLCore.initializeTooltips(),this.mainDiv=this.stepContent.find(".js-wpml-select-translation-manager-step"),this.nonce=this.mainDiv.data("nonce"),this.selectedUser="",this.mainSection=this.stepContent.find(".js-main"),this.newUserSection=this.stepContent.find(".js-create-user-section-wizard").hide(),this.existingUserSection=this.stepContent.find(".js-existing-user-section-wizard").hide(),this.addTranslationManagerButton=this.stepContent.find(".js-add-translation-manager"),this.addTranslationManagerButton.on("click",function(e){return t.handleAddTranslationManager()}),this.$(".js-go-back").on("click",function(e){return t.handleGoBack()}),this.$('input[name="user-mode"]').on("change",function(e){return t.handleUserMode(e)}),this.highlightUserMode(),WPML_TM.translationRolesSelect2(this.$(".js-translation-manager-select"),this.nonce,"manager",function(e){return t.selectChange(e)}),this.initializeNextButton(),this.addTranslationManager=new WPML_TM.setTranslationRole(this.$,this.newUserSection,this.nonce,"manager",function(e){return t.enableAddTranslationManagerButton(e)})}},{key:"initializeNextButton",value:function(){this.wizardFramework.showNextButton(!1),this.wizardFramework.enableNextButton(!1),this.wizardFramework.setNextButtonPrimary(!0)}},{key:"handleUserMode",value:function(t){switch(this.$(t.target).val()){case"create":this.newUserSection.show(),this.existingUserSection.hide(),this.mainSection.hide(),this.enableAddTranslationManagerButton(this.addTranslationManager.isValid());break;case"existing":this.newUserSection.hide(),this.existingUserSection.show(),this.mainSection.hide(),this.enableAddTranslationManagerButton(""!==this.selectedUser);break;case"myself":this.addTranslationManager.setExisting(this.mainDiv.data("user-id"),function(){location.reload()},null,{})}this.highlightUserMode()}},{key:"highlightUserMode",value:function(){var t=this,e=0===this.$('input[name="user-mode"]:checked').length;this.$('input[name="user-mode"]').each(function(n,i){return t.setRadioState(n,i,e)})}},{key:"setRadioState",value:function(t,e,n){var i=this.$(e);i.is(":checked")||n&&("create"===i.val()||"existing"===i.val())?i.closest("label").addClass("button-primary").removeClass("button-secondary"):i.closest("label").addClass("button-secondary").removeClass("button-primary")}},{key:"handleGoBack",value:function(){this.$('input[name="user-mode"]').removeAttr("checked"),this.highlightUserMode(),this.mainSection.show(),this.newUserSection.hide(),this.existingUserSection.hide()}},{key:"handleAddTranslationManager",value:function(){this.wizardFramework.triggerNextStep()}},{key:"selectChange",value:function(t){this.selectedUser=this.$(t.target).val(),this.enableAddTranslationManagerButton(""!==this.selectedUser)}},{key:"isOkToMoveToNextStep",value:function(t){switch(this.$('input[name="user-mode"]:checked').val()){case"create":this.addTranslationManager.addNew(t,null,{});break;case"existing":this.addTranslationManager.setExisting(this.selectedUser,t,null,{})}}},{key:"enableAddTranslationManagerButton",value:function(t){t?this.addTranslationManagerButton.removeAttr("disabled"):this.addTranslationManagerButton.attr("disabled","disabled")}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"show",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t.style.display=null),t.classList.remove("hidden")}},{key:"hide",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t.style.display="none"),t.classList.add("hidden")}},{key:"showSpinner",value:function(t){t.classList.add("is-active")}},{key:"hideSpinner",value:function(t){t.classList.remove("is-active")}},{key:"enableElement",value:function(t){t.classList.remove("disabled")}},{key:"disableElement",value:function(t){t.classList.add("disabled")}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={nonActive:"non-active",enabled:"enabled",active:"active"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=s(n(22)),o=s(n(4)),r=s(n(21));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.visible=!1,n.tools=new r.default,n.amsAPI=t,n.ateControls=document.getElementById("ate-controls"),n.ateControls&&(n.toggleATE=n.ateControls.querySelector(".js-toggle-ate"),n.synchronizeWithAMS=n.ateControls.querySelector(".js-synchronize-with-ams"),n.status=n.ateControls.querySelector(".otgs-notice__status"),n.errors=n.ateControls.querySelector(".otgs-notice__errors"),n.spinner=n.ateControls.querySelector(".spinner")),n.statusTypes=Object.keys(n.ateSettings.statuses).map(function(t){return n.ateSettings.statuses[t].type}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"init",value:function(){this.ateControls&&(this.initUI(),this.checkActivation(),this.initEventHandlers())}},{key:"initUI",value:function(){this.status&&this.tools.hide(this.status),this.errors&&this.tools.hide(this.errors),this.hideToggleATEButton(),this.hideSynchronizeWithAMSButton()}},{key:"show",value:function(){this.visibility(!0)}},{key:"hide",value:function(){this.visibility(!1)}},{key:"visibility",value:function(t){this.visible=t,this.ateControls&&(t?this.tools.show(this.ateControls):this.tools.hide(this.ateControls))}},{key:"updateControlsStatus",value:function(){this.visible&&(this.ATERequiresActivation()?this.enableATE():(this.ATEIsActive()&&this.updateSynchronizeWithAMSButton(),this.updateATEButton(),this.updateStatusMessage()))}},{key:"updateStatusMessage",value:function(){var t;this.tools.show(this.status),this.status.querySelector("p").innerHTML=this.getStatusHTML(),(t=this.status.classList).remove.apply(t,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(this.statusTypes)),this.status.classList.add(this.getStatus().type)}},{key:"getStatusHTML",value:function(){return"<strong>"+this.getStatus().message.status+"</strong> "+this.getStatus().message.text}},{key:"updateSynchronizeWithAMSButton",value:function(){this.ATEIsActive()&&this.ateSettings.hasTranslators?this.showSynchronizeWithAMSButton():this.hideSynchronizeWithAMSButton()}},{key:"updateATEButton",value:function(){this.toggleATE.innerHTML=this.getStatus().button,this.ATEIsActive()?this.hideToggleATEButton():this.showToggleATEButton()}},{key:"getStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t&&(t=this.ateSettings.currentStatus),this.ateSettings.statuses[t]}},{key:"ATERequiresActivation",value:function(){return this.ateSettings.currentStatus===a.default.nonActive}},{key:"ATEIsActive",value:function(){return this.ateSettings.currentStatus===a.default.active}},{key:"initEventHandlers",value:function(){var t=this;this.toggleATE&&(this.toggleATE.onclick=function(e){e.preventDefault(),t.enableATE()}),this.synchronizeWithAMS&&(this.synchronizeWithAMS.onclick=function(e){e.preventDefault(),t.synchronizeData()})}},{key:"checkActivation",value:function(){var t=this;this.ateSettings.currentStatus===a.default.enabled&&(this.tools.disableElement(this.toggleATE),this.updateError(),this.showSpinner(),this.amsAPI.checkStatus().then(function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{activated:!1}).activated&&(t.ateSettings.currentStatus=a.default.active,t.updateControlsStatus())}).finally(function(){t.toggleATE.classList.remove("disabled"),t.hideSpinner()}))}},{key:"enableATE",value:function(t){var e=this;this.updateError(),this.tools.disableElement(this.toggleATE),this.showSpinner(),this.amsAPI.registerClient().then(function(t){return t.enabled}).then(function(n){n&&(e.ateSettings.currentStatus=a.default.enabled),e.updateControlsStatus(),e.hideToggleATEButton(),t&&t()}).catch(function(t){e.updateError(t)}).finally(function(){e.hideSpinner()})}},{key:"synchronizeData",value:function(){var t=this;this.updateError(),this.showSpinner(),this.handleSynchronize().catch(function(e){t.updateError(e)}).finally(function(){t.tools.disableElement(t.synchronizeWithAMS),t.hideSpinner()})}},{key:"updateError",value:function(t){t?(this.errors.querySelector("p").innerHTML=t,this.tools.show(this.errors)):this.tools.hide(this.errors)}},{key:"handleSynchronize",value:function(){return this.amsAPI.synchronize()}},{key:"showSpinner",value:function(){this.spinner&&this.spinner.classList.add("is-active")}},{key:"hideSpinner",value:function(){this.spinner&&this.spinner.classList.remove("is-active")}},{key:"showSynchronizeWithAMSButton",value:function(){this.synchronizeWithAMS&&this.tools.show(this.synchronizeWithAMS,!0)}},{key:"hideSynchronizeWithAMSButton",value:function(){this.synchronizeWithAMS&&this.tools.hide(this.synchronizeWithAMS,!0)}},{key:"hideToggleATEButton",value:function(){this.toggleATE&&this.tools.hide(this.toggleATE,!0)}},{key:"showToggleATEButton",value:function(){this.toggleATE&&this.tools.show(this.toggleATE,!0)}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ID=e.ID,this.caps=e.caps,this.roles=e.roles,this.user_email=e.data,this.user_login=e.data.user_email,this.user_nicename=e.data.user_login}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(4),r=(i=o)&&i.__esModule?i:{default:i};var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),a(e,[{key:"get",value:function(t){return this.request(t,"GET")}},{key:"post",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.request(t,"POST",e)}},{key:"request",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={method:e.toUpperCase(),headers:{Accept:"application/json","Content-Type":"application/json","X-WP-Nonce":this.restNonce},credentials:"same-origin"};return"GET"!==i.method&&n&&(i.body="string"==typeof n?n:JSON.stringify(n)),this.handleRequest(this.restUrl+t,i)}},{key:"handleRequest",value:function(t,e){return fetch(t,e).then(function(t){if(!t.ok)throw new Error(t.statusText);return t.json()})}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={registerClient:"/wpml/tm/v1/ams/register_manager",checkStatus:"/wpml/tm/v1/ams/status",synchronizeTranslators:"/wpml/tm/v1/ams/synchronize/translators",synchronizeManagers:"/wpml/tm/v1/ams/synchronize/managers"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(26),r=(i=o)&&i.__esModule?i:{default:i};var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.request=e}return a(t,[{key:"registerClient",value:function(){return this.request.post(r.default.registerClient)}},{key:"checkStatus",value:function(){return this.request.get(r.default.checkStatus)}},{key:"synchronize",value:function(){var t=this;return this.request.get(r.default.synchronizeTranslators).then(function(){return t.request.get(r.default.synchronizeManagers)})}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=g(n(27)),o=g(n(25)),r=g(n(23)),s=g(n(20)),u=g(n(19)),l=g(n(18)),c=g(n(17)),h=g(n(13)),f=g(n(7)),d=g(n(5));function g(t){return t&&t.__esModule?t:{default:t}}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"create",value:function(t,e,n,i){switch(e){case"tm_select_manager":return new s.default(t,n,i);case"tm_finish":return new u.default(t,n,i);case"tm_translation_method":return new l.default(t,n,i);case"tm_translation_service":return new c.default(t,n,i);case"tm_local_translators":return new h.default(t,n,i);case"tm_translation_editor":var g=new o.default,v=new a.default(g),p=new r.default(v);return new f.default(t,n,i,p,g);case"tm_summary":return new d.default(t,n,i)}}}]),t}();e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.stepFactory=n,this.selectedUser="",this.currrentStep=null,this.wizardFramework=null}return i(t,[{key:"init",value:function(t){this.wizardFramework=t,this.wizardFramework.showBackButton(!1),this.wizardFramework.showNextButton(!1),this.wizardFramework.showSteps(!1)}},{key:"notifyCurrentStep",value:function(t){}},{key:"notifyContentFetched",value:function(t,e){this.currrentStep=this.stepFactory.create(this.$,t,e,this.wizardFramework),this.currrentStep.init()}},{key:"isOkToMoveToNextStep",value:function(t,e){this.currrentStep.isOkToMoveToNextStep(e)}}]),t}();e.default=a},function(t,e,n){"use strict";var i=o(n(29)),a=o(n(28));function o(t){return t&&t.__esModule?t:{default:t}}jQuery(document).ready(function(){var t=new i.default(jQuery,new a.default);t.init(WPMLCore.wizardFrameworkFactory.create(jQuery,t))})},function(t,e,n){t.exports=n(30)}]);